10 REM DL The Neverending - Story Datasoft 1985
11 REM Ripdubski 2015 (https://unfinishedbitness.info/2015/02/17/basic-display-list-interrupted/)
20 GRAPHICS 0 : POKE 710,30
30 ADRDL=1536 : DLLENGTH=0

20 POKE 106,PEEK(106)-16 : GRAPHICS 0 : RAMTOP=PEEK(106) : REM rezervovanie pamate 8kb (16*256)
30 SAVMSC=PEEK(88)+PEEK(89)*256 : REM odloz adresu aktualnej VRAM
40 SAVMSC = SAVMSC + 9*40 : REM posun grafickej pamate o 9 riadkov
50 ADRDL=1536 : DLLENGTH=105 : REM adresa noveho DL $600=1536 a jeho dlzka

60 FOR I=0 TO DLLENGTH-1 : REM nacitaj data DL na adresu ADRDL
61   READ A
62   IF A>-1 THEN POKE ADRDL+I,A 
63 NEXT I

64 POKE ADRDL+4,0 : POKE ADRDL+5,RAMTOP : REM adresa grafickej pamate horneho okna
65 POKE ADRDL+86,(SAVMSC-INT(SAVMSC/256)*256) : POKE ADRDL+87,INT(SAVMSC/256) : REM adresa grafickej pamate textoveho spodneho okna
66 POKE ADRDL+DLLENGTH-2,(ADRDL-INT(ADRDL/256)*256) : POKE ADRDL+DLLENGTH-1,INT(ADRDL/256) : REM startovna adresa samotneho DL

1000 DATA 112,112,48,78,-1,-1,14,14,14,14,14,14,14,14,14,14
1100 DATA 14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14
1200 DATA 14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14
1300 DATA 14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14
1400 DATA 14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14
1500 DATA 14,14,14,14,142,66,-1,-1,130,2,2,2,2,130,2,130
1600 DATA 2,2,2,2,2,2,65,-1,-1

2229 POKE 712,96 : POKE 708,116 : POKE 709,120 : POKE 710,36 : POKE 82,0 : REM nastav farby a okraj

2230 SIZE=3200 : OPEN #1,4,0,"H:def.MIC"
2240   FOR I=0 TO SIZE-1 : GET #1,P : POKE (RAMTOP*256)+I,P : NEXT I: REM Atari Basic
2240   BGET #1,(RAMTOP*256),SIZE : REM Turbo Basic
2290 CLOSE #1
2300 L.

21700 POKE 560,(ADRDL-INT(ADRDL/256)*256) : POKE 561,INT(ADRDL/256) : REM zapnutie DL

21701 COLRS=1024:CL=0:CH=4:POKE 209,4
21702 FOR I=0 TO 26:READ A:POKE 1536+DLLENGTH+I,A:NEXT I
21703 DATA 72,138,72,166,209,202,189,0,4,141,10,212,224,0,208,02,162,4,141,24,208,134,209,104,170,104,64
21704 FOR I=0 TO 3 : READ A : POKE COLRS+I,A : NEXT I
21705 DATA 2,52,198,82
21706 POKE 512,(ADRDL+DLLENGTH-INT((ADRDL+DLLENGTH)/256)*256) : POKE 513,INT((ADRDL+DLLENGTH)/256):POKE 54286,192
